#include "2D_Conv.h"
#include "2D_Conv_base.h"


////////////////////////////////////////////////////////
//  名称:
//      Multi_Array_8x8(根据硬件同步，暂不提供8*8，如有需求请使用16*16)
//  功能:
//      两个8X8矩阵相乘,数据格式为Q15
//  参数:
//      1.M[RSP+2*MMU_BASE]：输入矩阵A的首地址
//      2.M[RSP+1*MMU_BASE]：输入矩阵B的首地址
//      3.M[RSP+0*MMU_BASE]：输出矩阵的首地址
//  返回值:
//      无
////////////////////////////////////////////////////////
//Sub_AutoField Multi_Array_8x8
//{
//	RA0 = M[RSP + 2 * MMU_BASE];	//输入矩阵A的地址	
//	RA1 = M[RSP + 1 * MMU_BASE];	//输入矩阵B的地址
//	RA2 = M[RSP + 0 * MMU_BASE];	//输出地址
//
//	double A[64], B[64];
//	double C[64] = { 0 };
//	for (int i = 0; i < 64; i++)
//	{
//		RD0 = M[RA0++];
//		A[i] = RD0.m_data;
//		A[i] = A[i] / 32768;
//	}
//	for (int i = 0; i < 64; i++)
//	{
//		RD0 = M[RA1++];
//		B[i] = RD0.m_data;
//		B[i] = B[i] / 32768;
//	}
//	//算法实现
//	for (int i = 0; i < 8; i++)
//	{
//		for (int k = 0; k < 8; k++)
//		{
//			for (int m = 0; m < 8; m++)
//			{
//				C[8 * i + k] += A[8 * i + m] * B[8 * m + k];
//			}
//			C[8 * i + k] = C[8 * i + k] * 32768;
//		}
//	}
//
//	for (int i = 0; i < 64; i++)
//	{
//		RD0 = C[i];
//		M[RA2++] = RD0;
//	}
//
//	Return_AutoField(3 * MMU_BASE);		//压栈了三次，函数结尾处需推栈三次
//}


////////////////////////////////////////////////////////
//  名称:
//      Multi_Array_16X16
//  功能:
//      两个16X16矩阵相乘,数据格式为Q15
//  参数:
//      1.M[RSP+2*MMU_BASE]：输入矩阵A的首地址，q15
//      2.M[RSP+1*MMU_BASE]：输入矩阵B的首地址，q15
//      3.M[RSP+0*MMU_BASE]：输出矩阵的首地址，q16已限幅
//  返回值:
//      无
////////////////////////////////////////////////////////
Sub_AutoField Multi_Array_16x16
{
	RA0 = M[RSP + 2 * MMU_BASE];	//输入矩阵A的地址	
	RA1 = M[RSP + 1 * MMU_BASE];	//输入矩阵B的地址
	RA2 = M[RSP + 0 * MMU_BASE];	//输出地址
	short A[256], B[256], T[256];
	int C[256] = { 0 };
	int data[16];
	for (int i = 0; i < 256; i++)
	{
		RD0 = M[RA0++];
		A[i] = RD0.m_data;
	}
	for (int i = 0; i < 256; i++)
	{
		RD0 = M[RA1++];
		B[i] = RD0.m_data;
	}
	conv.Multi_Array(A, B, C);

	//RA1 = RN_GRAM0;
	for (int i = 0; i < 256; i++)
	{
		RD0 = C[i];
		M[RA2++] = RD0;
		//RD0 = T[i];
		//M[RA1++] = RD0;

	}
	Return_AutoField(3 * MMU_BASE);		
}

////////////////////////////////////////////////////////
//  名称:
//      Conv_2D_3X3
//  功能:
//      卷积核大小为3X3的二维卷积计算（卷积层高128*宽64）
//  参数:
//      1.M[RSP+2*MMU_BASE]：data地址,数据格式为Q15
//      2.M[RSP+1*MMU_BASE]：卷积滤波器系数存放地址,数据格式为Q15
//      3.M[RSP+0*MMU_BASE]：卷积结果地址,数据格式为Q7
//  返回值:
//      无
////////////////////////////////////////////////////////
Sub_AutoField Conv_2D_3X3
{
	RA0 = M[RSP + 2 * MMU_BASE];	//data地址
	RA1 = M[RSP + 1 * MMU_BASE];	//卷积滤波器系数存放地址
	RA2 = M[RSP + 0 * MMU_BASE];	//卷积结果地址

	int data[8976],key[25];
	for (int i = 0; i < 8192; i++)
	{
		RD0 = M[RA0++];
		data[i] = RD0.m_data;
	}
	for (int i = 0; i < 25; i++)
	{
		RD0 = M[RA1++];
		key[i] = RD0.m_data;
	}

	//3X3扩充为5X5
	//卷积核扩充
	conv.Conv_3X3to5X5(key);
	//扩充图像，扩充后为（128+4）*（64+4）
	conv.Extend_2D_Conv_5x5(data);
	//卷积乘
	conv.Conv_5x5(data, key);


	//结果放到输出指针
	for (int i = 0; i < 8192; i++)
	{
		RD0 = data[i];
		M[RA2++] = RD0;
	}

	Return_AutoField(3 * MMU_BASE);		//压栈了三次，函数结尾处需推栈三次

}

////////////////////////////////////////////////////////
//  名称:
//      Conv_2D_5X5
//  功能:
//      卷积核大小为5X5的二维卷积计算（卷积层高128*宽64）(补原值)
//  参数:
//      1.M[RSP+2*MMU_BASE]：data地址,数据格式为Q15
//      2.M[RSP+1*MMU_BASE]：卷积滤波器系数存放地址,数据格式为Q15
//      3.M[RSP+0*MMU_BASE]：卷积结果地址,数据格式为Q16,已限幅
//  返回值:
//      无
////////////////////////////////////////////////////////
Sub_AutoField Conv_2D_5X5
{
	RA0 = M[RSP + 2 * MMU_BASE];	//data地址
	RA1 = M[RSP + 1 * MMU_BASE];	//卷积滤波器系数存放地址
	RA2 = M[RSP + 0 * MMU_BASE];	//卷积结果地址

	int data[8976],key[25];
	for (int i = 0; i < 8192; i++)
	{
		RD0 = M[RA0++];
		data[i] = RD0.m_data;
	}
	for (int i = 0; i < 25; i++)
	{
		RD0 = M[RA1++];
		key[i] = RD0.m_data;
	}

	//扩充图像
	//扩充后为（128+4）*（64+4）
	conv.Extend_2D_Conv_5x5(data);

	//卷积乘
	conv.Conv_5x5(data, key);




	//结果放到输出指针
	for (int i = 0; i < 8192; i++)
	{
		RD0 = data[i];
		M[RA2++] = RD0;
	}

	Return_AutoField(3 * MMU_BASE);		//压栈了三次，函数结尾处需推栈三次
}

////////////////////////////////////////////////////////
//  名称:
//      Conv_2D_5X5_2(暂不开放)
//  功能:
//      卷积核大小为5X5的二维卷积计算（卷积层宽256*高64）(边上补0)
//  参数:
//      1.M[RSP+2*MMU_BASE]：data地址,数据格式为Q15
//      2.M[RSP+1*MMU_BASE]：卷积滤波器系数存放地址
//      3.M[RSP+0*MMU_BASE]：卷积结果地址,数据格式为Q16,已限幅
//  返回值:
//      无
////////////////////////////////////////////////////////
Sub_AutoField Conv_2D_5X5_2
{
	RA0 = M[RSP + 2 * MMU_BASE];	//data地址
	RA1 = M[RSP + 1 * MMU_BASE];	//卷积滤波器系数存放地址
	RA2 = M[RSP + 0 * MMU_BASE];	//卷积结果地址

	int data[17680],key[25];
	for (int i = 0; i < 16384; i++)
	{
		RD0 = M[RA0++];
		data[i] = RD0.m_data;
	}
	for (int i = 0; i < 25; i++)
	{
		RD0 = M[RA1++];
		key[i] = RD0.m_data;
	}

	//扩充图像
	//扩充后为（256+4）*（64+4）
	conv.Extend_2D_Conv_5x5_2(data);

	//卷积乘
	conv.Conv_5x5_2(data, key);




	//结果放到输出指针
	for (int i = 0; i < 16384; i++)
	{
		RD0 = data[i];
		M[RA2++] = RD0;
	}

	Return_AutoField(3 * MMU_BASE);		//压栈了三次，函数结尾处需推栈三次
}



////////////////////////////////////////////////////////
//  名称:
//      ReLU
//  功能:
//      ReLU激活函数
//  参数:
//      1.M[RSP+2*MMU_BASE]：输入地址
//      2.M[RSP+1*MMU_BASE]：输出地址
//      3.M[RSP+0*MMU_BASE]：数据长度
//  返回值:
//      无
////////////////////////////////////////////////////////
Sub_AutoField ReLU
{
	RA0 = M[RSP + 2 * MMU_BASE];	
	RA1 = M[RSP + 1 * MMU_BASE];	
	RD0 = M[RSP + 0 * MMU_BASE];	

	int n = RD0.m_data;
	for (int i = 0; i < n; i++)
	{
		RD0 = M[RA0++];
		if (RD0 < 0)
			RD0 = 0;
		M[RA1++] = RD0;
	}


	Return_AutoField(3 * MMU_BASE);		

}


////////////////////////////////////////////////////////
//  名称:
//      Softmax
//  功能:
//      Softmax函数，q15
//  参数:
//      1.M[RSP+2*MMU_BASE]：输入地址
//      2.M[RSP+1*MMU_BASE]：输出地址
//      3.M[RSP+0*MMU_BASE]：数据长度
//  返回值:
//      无
////////////////////////////////////////////////////////
Sub_AutoField Softmax
{
	RA0 = M[RSP + 2 * MMU_BASE];
	RA1 = M[RSP + 1 * MMU_BASE];
	RD0 = M[RSP + 0 * MMU_BASE];

	int n = RD0.m_data;
	double data[10];
	double c = 0;
	double r = 0;

	for (int i = 0; i < n; i++)
	{
		RD0 = M[RA0++];
		data[i] = RD0.m_data;
		data[i] = data[i] / 32767;
	}

	//计算exp累加和
	for (int i = 0; i < n; i++)
	{
		c += exp(data[i]);
	}

	for (int i = 0; i < n; i++)
	{
		r = exp(data[i]);
		r = 32767 * r / c;
		RD0 = r;
		M[RA1++] = RD0;
	}


	Return_AutoField(3 * MMU_BASE);

}

////////////////////////////////////////////////////////
//  名称:
//      Logistic
//  功能:
//      Logistic函数，q15
//  参数:
//      1.M[RSP+2*MMU_BASE]：输入地址
//      2.M[RSP+1*MMU_BASE]：输出地址
//      3.M[RSP+0*MMU_BASE]：数据长度
//  返回值:
//      无
////////////////////////////////////////////////////////
Sub_AutoField Logistic
{
	RA0 = M[RSP + 2 * MMU_BASE];
	RA1 = M[RSP + 1 * MMU_BASE];
	RD0 = M[RSP + 0 * MMU_BASE];

	//查表法
	int tab[2048] = { 0x3fff, 0x4007, 0x400f, 0x4017, 0x401f, 0x4027, 0x402f, 0x4037, 0x403f, 0x4047, 0x404f, 0x4057, 0x405f, 0x4067, 0x406f, 0x4077, 0x407f, 0x4087, 0x408f, 0x4097, 0x409f, 0x40a7, 0x40af, 0x40b7, 0x40bf, 0x40c7, 0x40cf, 0x40d7, 0x40df, 0x40e7, 0x40ef, 0x40f7, 0x40ff, 0x4107, 0x410f, 0x4117, 0x411f, 0x4127, 0x412f, 0x4137, 0x413f, 0x4147, 0x414f, 0x4157, 0x415f, 0x4167, 0x416f, 0x4177, 0x417f, 0x4187, 0x418f, 0x4197, 0x419f, 0x41a7, 0x41af, 0x41b7, 0x41bf, 0x41c7, 0x41cf, 0x41d7, 0x41df, 0x41e7, 0x41ef, 0x41f7, 0x41ff, 0x4207, 0x420f, 0x4217, 0x421f, 0x4227, 0x422f, 0x4237, 0x423f, 0x4247, 0x424f, 0x4257, 0x425f, 0x4267, 0x426f, 0x4277, 0x427f, 0x4287, 0x428f, 0x4297, 0x429f, 0x42a7, 0x42af, 0x42b7, 0x42bf, 0x42c7, 0x42cf, 0x42d7, 0x42df, 0x42e6, 0x42ee, 0x42f6, 0x42fe, 0x4306, 0x430e, 0x4316, 0x431e, 0x4326, 0x432e, 0x4336, 0x433e, 0x4346, 0x434e, 0x4356, 0x435e, 0x4366, 0x436e, 0x4376, 0x437e, 0x4386, 0x438e, 0x4396, 0x439e, 0x43a6, 0x43ae, 0x43b6, 0x43be, 0x43c6, 0x43ce, 0x43d6, 0x43de, 0x43e6, 0x43ee, 0x43f6, 0x43fe, 0x4406, 0x440e, 0x4416, 0x441e, 0x4426, 0x442d, 0x4435, 0x443d, 0x4445, 0x444d, 0x4455, 0x445d, 0x4465, 0x446d, 0x4475, 0x447d, 0x4485, 0x448d, 0x4495, 0x449d, 0x44a5, 0x44ad, 0x44b5, 0x44bd, 0x44c5, 0x44cd, 0x44d5, 0x44dd, 0x44e5, 0x44ec, 0x44f4, 0x44fc, 0x4504, 0x450c, 0x4514, 0x451c, 0x4524, 0x452c, 0x4534, 0x453c, 0x4544, 0x454c, 0x4554, 0x455c, 0x4564, 0x456c, 0x4574, 0x457c, 0x4583, 0x458b, 0x4593, 0x459b, 0x45a3, 0x45ab, 0x45b3, 0x45bb, 0x45c3, 0x45cb, 0x45d3, 0x45db, 0x45e3, 0x45eb, 0x45f3, 0x45fb, 0x4602, 0x460a, 0x4612, 0x461a, 0x4622, 0x462a, 0x4632, 0x463a, 0x4642, 0x464a, 0x4652, 0x465a, 0x4662, 0x4669, 0x4671, 0x4679, 0x4681, 0x4689, 0x4691, 0x4699, 0x46a1, 0x46a9, 0x46b1, 0x46b9, 0x46c1, 0x46c8, 0x46d0, 0x46d8, 0x46e0, 0x46e8, 0x46f0, 0x46f8, 0x4700, 0x4708, 0x4710, 0x4718, 0x471f, 0x4727, 0x472f, 0x4737, 0x473f, 0x4747, 0x474f, 0x4757, 0x475f, 0x4766, 0x476e, 0x4776, 0x477e, 0x4786, 0x478e, 0x4796, 0x479e, 0x47a6, 0x47ad, 0x47b5, 0x47bd, 0x47c5, 0x47cd, 0x47d5, 0x47dd, 0x47e5, 0x47ed, 0x47f4, 0x47fc, 0x4804, 0x480c, 0x4814, 0x481c, 0x4824, 0x482c, 0x4833, 0x483b, 0x4843, 0x484b, 0x4853, 0x485b, 0x4863, 0x486a, 0x4872, 0x487a, 0x4882, 0x488a, 0x4892, 0x489a, 0x48a1, 0x48a9, 0x48b1, 0x48b9, 0x48c1, 0x48c9, 0x48d1, 0x48d8, 0x48e0, 0x48e8, 0x48f0, 0x48f8, 0x4900, 0x4907, 0x490f, 0x4917, 0x491f, 0x4927, 0x492f, 0x4936, 0x493e, 0x4946, 0x494e, 0x4956, 0x495e, 0x4965, 0x496d, 0x4975, 0x497d, 0x4985, 0x498d, 0x4994, 0x499c, 0x49a4, 0x49ac, 0x49b4, 0x49bb, 0x49c3, 0x49cb, 0x49d3, 0x49db, 0x49e3, 0x49ea, 0x49f2, 0x49fa, 0x4a02, 0x4a0a, 0x4a11, 0x4a19, 0x4a21, 0x4a29, 0x4a31, 0x4a38, 0x4a40, 0x4a48, 0x4a50, 0x4a58, 0x4a5f, 0x4a67, 0x4a6f, 0x4a77, 0x4a7e, 0x4a86, 0x4a8e, 0x4a96, 0x4a9e, 0x4aa5, 0x4aad, 0x4ab5, 0x4abd, 0x4ac5, 0x4acc, 0x4ad4, 0x4adc, 0x4ae4, 0x4aeb, 0x4af3, 0x4afb, 0x4b03, 0x4b0a, 0x4b12, 0x4b1a, 0x4b22, 0x4b29, 0x4b31, 0x4b39, 0x4b41, 0x4b48, 0x4b50, 0x4b58, 0x4b60, 0x4b67, 0x4b6f, 0x4b77, 0x4b7f, 0x4b86, 0x4b8e, 0x4b96, 0x4b9e, 0x4ba5, 0x4bad, 0x4bb5, 0x4bbd, 0x4bc4, 0x4bcc, 0x4bd4, 0x4bdb, 0x4be3, 0x4beb, 0x4bf3, 0x4bfa, 0x4c02, 0x4c0a, 0x4c12, 0x4c19, 0x4c21, 0x4c29, 0x4c30, 0x4c38, 0x4c40, 0x4c48, 0x4c4f, 0x4c57, 0x4c5f, 0x4c66, 0x4c6e, 0x4c76, 0x4c7d, 0x4c85, 0x4c8d, 0x4c94, 0x4c9c, 0x4ca4, 0x4cac, 0x4cb3, 0x4cbb, 0x4cc3, 0x4cca, 0x4cd2, 0x4cda, 0x4ce1, 0x4ce9, 0x4cf1, 0x4cf8, 0x4d00, 0x4d08, 0x4d0f, 0x4d17, 0x4d1f, 0x4d26, 0x4d2e, 0x4d36, 0x4d3d, 0x4d45, 0x4d4d, 0x4d54, 0x4d5c, 0x4d64, 0x4d6b, 0x4d73, 0x4d7b, 0x4d82, 0x4d8a, 0x4d91, 0x4d99, 0x4da1, 0x4da8, 0x4db0, 0x4db8, 0x4dbf, 0x4dc7, 0x4dcf, 0x4dd6, 0x4dde, 0x4de5, 0x4ded, 0x4df5, 0x4dfc, 0x4e04, 0x4e0b, 0x4e13, 0x4e1b, 0x4e22, 0x4e2a, 0x4e32, 0x4e39, 0x4e41, 0x4e48, 0x4e50, 0x4e58, 0x4e5f, 0x4e67, 0x4e6e, 0x4e76, 0x4e7e, 0x4e85, 0x4e8d, 0x4e94, 0x4e9c, 0x4ea3, 0x4eab, 0x4eb3, 0x4eba, 0x4ec2, 0x4ec9, 0x4ed1, 0x4ed8, 0x4ee0, 0x4ee8, 0x4eef, 0x4ef7, 0x4efe, 0x4f06, 0x4f0d, 0x4f15, 0x4f1d, 0x4f24, 0x4f2c, 0x4f33, 0x4f3b, 0x4f42, 0x4f4a, 0x4f51, 0x4f59, 0x4f60, 0x4f68, 0x4f70, 0x4f77, 0x4f7f, 0x4f86, 0x4f8e, 0x4f95, 0x4f9d, 0x4fa4, 0x4fac, 0x4fb3, 0x4fbb, 0x4fc2, 0x4fca, 0x4fd1, 0x4fd9, 0x4fe0, 0x4fe8, 0x4fef, 0x4ff7, 0x4ffe, 0x5006, 0x500d, 0x5015, 0x501c, 0x5024, 0x502b, 0x5033, 0x503a, 0x5042, 0x5049, 0x5051, 0x5058, 0x5060, 0x5067, 0x506f, 0x5076, 0x507e, 0x5085, 0x508d, 0x5094, 0x509b, 0x50a3, 0x50aa, 0x50b2, 0x50b9, 0x50c1, 0x50c8, 0x50d0, 0x50d7, 0x50df, 0x50e6, 0x50ed, 0x50f5, 0x50fc, 0x5104, 0x510b, 0x5113, 0x511a, 0x5121, 0x5129, 0x5130, 0x5138, 0x513f, 0x5147, 0x514e, 0x5155, 0x515d, 0x5164, 0x516c, 0x5173, 0x517a, 0x5182, 0x5189, 0x5191, 0x5198, 0x519f, 0x51a7, 0x51ae, 0x51b6, 0x51bd, 0x51c4, 0x51cc, 0x51d3, 0x51da, 0x51e2, 0x51e9, 0x51f1, 0x51f8, 0x51ff, 0x5207, 0x520e, 0x5215, 0x521d, 0x5224, 0x522c, 0x5233, 0x523a, 0x5242, 0x5249, 0x5250, 0x5258, 0x525f, 0x5266, 0x526e, 0x5275, 0x527c, 0x5284, 0x528b, 0x5292, 0x529a, 0x52a1, 0x52a8, 0x52b0, 0x52b7, 0x52be, 0x52c6, 0x52cd, 0x52d4, 0x52db, 0x52e3, 0x52ea, 0x52f1, 0x52f9, 0x5300, 0x5307, 0x530f, 0x5316, 0x531d, 0x5324, 0x532c, 0x5333, 0x533a, 0x5342, 0x5349, 0x5350, 0x5357, 0x535f, 0x5366, 0x536d, 0x5374, 0x537c, 0x5383, 0x538a, 0x5391, 0x5399, 0x53a0, 0x53a7, 0x53ae, 0x53b6, 0x53bd, 0x53c4, 0x53cb, 0x53d3, 0x53da, 0x53e1, 0x53e8, 0x53ef, 0x53f7, 0x53fe, 0x5405, 0x540c, 0x5414, 0x541b, 0x5422, 0x5429, 0x5430, 0x5438, 0x543f, 0x5446, 0x544d, 0x5454, 0x545c, 0x5463, 0x546a, 0x5471, 0x5478, 0x5480, 0x5487, 0x548e, 0x5495, 0x549c, 0x54a3, 0x54ab, 0x54b2, 0x54b9, 0x54c0, 0x54c7, 0x54ce, 0x54d6, 0x54dd, 0x54e4, 0x54eb, 0x54f2, 0x54f9, 0x5500, 0x5508, 0x550f, 0x5516, 0x551d, 0x5524, 0x552b, 0x5532, 0x5539, 0x5541, 0x5548, 0x554f, 0x5556, 0x555d, 0x5564, 0x556b, 0x5572, 0x5579, 0x5580, 0x5588, 0x558f, 0x5596, 0x559d, 0x55a4, 0x55ab, 0x55b2, 0x55b9, 0x55c0, 0x55c7, 0x55ce, 0x55d5, 0x55dd, 0x55e4, 0x55eb, 0x55f2, 0x55f9, 0x5600, 0x5607, 0x560e, 0x5615, 0x561c, 0x5623, 0x562a, 0x5631, 0x5638, 0x563f, 0x5646, 0x564d, 0x5654, 0x565b, 0x5662, 0x5669, 0x5670, 0x5677, 0x567e, 0x5685, 0x568c, 0x5693, 0x569a, 0x56a1, 0x56a8, 0x56af, 0x56b6, 0x56bd, 0x56c4, 0x56cb, 0x56d2, 0x56d9, 0x56e0, 0x56e7, 0x56ee, 0x56f5, 0x56fc, 0x5703, 0x570a, 0x5711, 0x5718, 0x571f, 0x5726, 0x572d, 0x5734, 0x573b, 0x5742, 0x5749, 0x5750, 0x5757, 0x575e, 0x5764, 0x576b, 0x5772, 0x5779, 0x5780, 0x5787, 0x578e, 0x5795, 0x579c, 0x57a3, 0x57aa, 0x57b1, 0x57b7, 0x57be, 0x57c5, 0x57cc, 0x57d3, 0x57da, 0x57e1, 0x57e8, 0x57ef, 0x57f5, 0x57fc, 0x5803, 0x580a, 0x5811, 0x5818, 0x581f, 0x5826, 0x582c, 0x5833, 0x583a, 0x5841, 0x5848, 0x584f, 0x5856, 0x585c, 0x5863, 0x586a, 0x5871, 0x5878, 0x587f, 0x5885, 0x588c, 0x5893, 0x589a, 0x58a1, 0x58a7, 0x58ae, 0x58b5, 0x58bc, 0x58c3, 0x58ca, 0x58d0, 0x58d7, 0x58de, 0x58e5, 0x58eb, 0x58f2, 0x58f9, 0x5900, 0x5907, 0x590d, 0x5914, 0x591b, 0x5922, 0x5928, 0x592f, 0x5936, 0x593d, 0x5943, 0x594a, 0x5951, 0x5958, 0x595e, 0x5965, 0x596c, 0x5973, 0x5979, 0x5980, 0x5987, 0x598e, 0x5994, 0x599b, 0x59a2, 0x59a8, 0x59af, 0x59b6, 0x59bd, 0x59c3, 0x59ca, 0x59d1, 0x59d7, 0x59de, 0x59e5, 0x59eb, 0x59f2, 0x59f9, 0x5a00, 0x5a06, 0x5a0d, 0x5a14, 0x5a1a, 0x5a21, 0x5a28, 0x5a2e, 0x5a35, 0x5a3c, 0x5a42, 0x5a49, 0x5a4f, 0x5a56, 0x5a5d, 0x5a63, 0x5a6a, 0x5a71, 0x5a77, 0x5a7e, 0x5a85, 0x5a8b, 0x5a92, 0x5a98, 0x5a9f, 0x5aa6, 0x5aac, 0x5ab3, 0x5aba, 0x5ac0, 0x5ac7, 0x5acd, 0x5ad4, 0x5ada, 0x5ae1, 0x5ae8, 0x5aee, 0x5af5, 0x5afb, 0x5b02, 0x5b09, 0x5b0f, 0x5b16, 0x5b1c, 0x5b23, 0x5b29, 0x5b30, 0x5b37, 0x5b3d, 0x5b44, 0x5b4a, 0x5b51, 0x5b57, 0x5b5e, 0x5b64, 0x5b6b, 0x5b71, 0x5b78, 0x5b7e, 0x5b85, 0x5b8b, 0x5b92, 0x5b98, 0x5b9f, 0x5ba6, 0x5bac, 0x5bb3, 0x5bb9, 0x5bc0, 0x5bc6, 0x5bcd, 0x5bd3, 0x5bd9, 0x5be0, 0x5be6, 0x5bed, 0x5bf3, 0x5bfa, 0x5c00, 0x5c07, 0x5c0d, 0x5c14, 0x5c1a, 0x5c21, 0x5c27, 0x5c2e, 0x5c34, 0x5c3a, 0x5c41, 0x5c47, 0x5c4e, 0x5c54, 0x5c5b, 0x5c61, 0x5c67, 0x5c6e, 0x5c74, 0x5c7b, 0x5c81, 0x5c88, 0x5c8e, 0x5c94, 0x5c9b, 0x5ca1, 0x5ca8, 0x5cae, 0x5cb4, 0x5cbb, 0x5cc1, 0x5cc8, 0x5cce, 0x5cd4, 0x5cdb, 0x5ce1, 0x5ce7, 0x5cee, 0x5cf4, 0x5cfa, 0x5d01, 0x5d07, 0x5d0e, 0x5d14, 0x5d1a, 0x5d21, 0x5d27, 0x5d2d, 0x5d34, 0x5d3a, 0x5d40, 0x5d47, 0x5d4d, 0x5d53, 0x5d5a, 0x5d60, 0x5d66, 0x5d6c, 0x5d73, 0x5d79, 0x5d7f, 0x5d86, 0x5d8c, 0x226c, 0x2272, 0x2278, 0x227f, 0x2285, 0x228b, 0x2292, 0x2298, 0x229e, 0x22a4, 0x22ab, 0x22b1, 0x22b7, 0x22be, 0x22c4, 0x22ca, 0x22d1, 0x22d7, 0x22dd, 0x22e4, 0x22ea, 0x22f0, 0x22f7, 0x22fd, 0x2304, 0x230a, 0x2310, 0x2317, 0x231d, 0x2323, 0x232a, 0x2330, 0x2336, 0x233d, 0x2343, 0x234a, 0x2350, 0x2356, 0x235d, 0x2363, 0x236a, 0x2370, 0x2376, 0x237d, 0x2383, 0x238a, 0x2390, 0x2397, 0x239d, 0x23a3, 0x23aa, 0x23b0, 0x23b7, 0x23bd, 0x23c4, 0x23ca, 0x23d0, 0x23d7, 0x23dd, 0x23e4, 0x23ea, 0x23f1, 0x23f7, 0x23fe, 0x2404, 0x240b, 0x2411, 0x2418, 0x241e, 0x2425, 0x242b, 0x2431, 0x2438, 0x243e, 0x2445, 0x244b, 0x2452, 0x2458, 0x245f, 0x2466, 0x246c, 0x2473, 0x2479, 0x2480, 0x2486, 0x248d, 0x2493, 0x249a, 0x24a0, 0x24a7, 0x24ad, 0x24b4, 0x24ba, 0x24c1, 0x24c7, 0x24ce, 0x24d5, 0x24db, 0x24e2, 0x24e8, 0x24ef, 0x24f5, 0x24fc, 0x2503, 0x2509, 0x2510, 0x2516, 0x251d, 0x2524, 0x252a, 0x2531, 0x2537, 0x253e, 0x2544, 0x254b, 0x2552, 0x2558, 0x255f, 0x2566, 0x256c, 0x2573, 0x2579, 0x2580, 0x2587, 0x258d, 0x2594, 0x259b, 0x25a1, 0x25a8, 0x25af, 0x25b5, 0x25bc, 0x25c2, 0x25c9, 0x25d0, 0x25d6, 0x25dd, 0x25e4, 0x25ea, 0x25f1, 0x25f8, 0x25fe, 0x2605, 0x260c, 0x2613, 0x2619, 0x2620, 0x2627, 0x262d, 0x2634, 0x263b, 0x2641, 0x2648, 0x264f, 0x2656, 0x265c, 0x2663, 0x266a, 0x2670, 0x2677, 0x267e, 0x2685, 0x268b, 0x2692, 0x2699, 0x26a0, 0x26a6, 0x26ad, 0x26b4, 0x26bb, 0x26c1, 0x26c8, 0x26cf, 0x26d6, 0x26dc, 0x26e3, 0x26ea, 0x26f1, 0x26f7, 0x26fe, 0x2705, 0x270c, 0x2713, 0x2719, 0x2720, 0x2727, 0x272e, 0x2734, 0x273b, 0x2742, 0x2749, 0x2750, 0x2757, 0x275d, 0x2764, 0x276b, 0x2772, 0x2779, 0x277f, 0x2786, 0x278d, 0x2794, 0x279b, 0x27a2, 0x27a8, 0x27af, 0x27b6, 0x27bd, 0x27c4, 0x27cb, 0x27d2, 0x27d8, 0x27df, 0x27e6, 0x27ed, 0x27f4, 0x27fb, 0x2802, 0x2809, 0x280f, 0x2816, 0x281d, 0x2824, 0x282b, 0x2832, 0x2839, 0x2840, 0x2847, 0x284d, 0x2854, 0x285b, 0x2862, 0x2869, 0x2870, 0x2877, 0x287e, 0x2885, 0x288c, 0x2893, 0x289a, 0x28a0, 0x28a7, 0x28ae, 0x28b5, 0x28bc, 0x28c3, 0x28ca, 0x28d1, 0x28d8, 0x28df, 0x28e6, 0x28ed, 0x28f4, 0x28fb, 0x2902, 0x2909, 0x2910, 0x2917, 0x291e, 0x2925, 0x292c, 0x2933, 0x293a, 0x2941, 0x2948, 0x294f, 0x2956, 0x295d, 0x2964, 0x296b, 0x2972, 0x2979, 0x2980, 0x2987, 0x298e, 0x2995, 0x299c, 0x29a3, 0x29aa, 0x29b1, 0x29b8, 0x29bf, 0x29c6, 0x29cd, 0x29d4, 0x29db, 0x29e2, 0x29e9, 0x29f0, 0x29f7, 0x29fe, 0x2a05, 0x2a0c, 0x2a13, 0x2a1a, 0x2a21, 0x2a29, 0x2a30, 0x2a37, 0x2a3e, 0x2a45, 0x2a4c, 0x2a53, 0x2a5a, 0x2a61, 0x2a68, 0x2a6f, 0x2a76, 0x2a7e, 0x2a85, 0x2a8c, 0x2a93, 0x2a9a, 0x2aa1, 0x2aa8, 0x2aaf, 0x2ab6, 0x2abd, 0x2ac5, 0x2acc, 0x2ad3, 0x2ada, 0x2ae1, 0x2ae8, 0x2aef, 0x2af6, 0x2afe, 0x2b05, 0x2b0c, 0x2b13, 0x2b1a, 0x2b21, 0x2b28, 0x2b30, 0x2b37, 0x2b3e, 0x2b45, 0x2b4c, 0x2b53, 0x2b5b, 0x2b62, 0x2b69, 0x2b70, 0x2b77, 0x2b7e, 0x2b86, 0x2b8d, 0x2b94, 0x2b9b, 0x2ba2, 0x2baa, 0x2bb1, 0x2bb8, 0x2bbf, 0x2bc6, 0x2bce, 0x2bd5, 0x2bdc, 0x2be3, 0x2bea, 0x2bf2, 0x2bf9, 0x2c00, 0x2c07, 0x2c0f, 0x2c16, 0x2c1d, 0x2c24, 0x2c2b, 0x2c33, 0x2c3a, 0x2c41, 0x2c48, 0x2c50, 0x2c57, 0x2c5e, 0x2c65, 0x2c6d, 0x2c74, 0x2c7b, 0x2c82, 0x2c8a, 0x2c91, 0x2c98, 0x2c9f, 0x2ca7, 0x2cae, 0x2cb5, 0x2cbc, 0x2cc4, 0x2ccb, 0x2cd2, 0x2cda, 0x2ce1, 0x2ce8, 0x2cef, 0x2cf7, 0x2cfe, 0x2d05, 0x2d0d, 0x2d14, 0x2d1b, 0x2d23, 0x2d2a, 0x2d31, 0x2d38, 0x2d40, 0x2d47, 0x2d4e, 0x2d56, 0x2d5d, 0x2d64, 0x2d6c, 0x2d73, 0x2d7a, 0x2d82, 0x2d89, 0x2d90, 0x2d98, 0x2d9f, 0x2da6, 0x2dae, 0x2db5, 0x2dbc, 0x2dc4, 0x2dcb, 0x2dd2, 0x2dda, 0x2de1, 0x2de9, 0x2df0, 0x2df7, 0x2dff, 0x2e06, 0x2e0d, 0x2e15, 0x2e1c, 0x2e24, 0x2e2b, 0x2e32, 0x2e3a, 0x2e41, 0x2e48, 0x2e50, 0x2e57, 0x2e5f, 0x2e66, 0x2e6d, 0x2e75, 0x2e7c, 0x2e84, 0x2e8b, 0x2e92, 0x2e9a, 0x2ea1, 0x2ea9, 0x2eb0, 0x2eb7, 0x2ebf, 0x2ec6, 0x2ece, 0x2ed5, 0x2edd, 0x2ee4, 0x2eeb, 0x2ef3, 0x2efa, 0x2f02, 0x2f09, 0x2f11, 0x2f18, 0x2f1f, 0x2f27, 0x2f2e, 0x2f36, 0x2f3d, 0x2f45, 0x2f4c, 0x2f54, 0x2f5b, 0x2f63, 0x2f6a, 0x2f71, 0x2f79, 0x2f80, 0x2f88, 0x2f8f, 0x2f97, 0x2f9e, 0x2fa6, 0x2fad, 0x2fb5, 0x2fbc, 0x2fc4, 0x2fcb, 0x2fd3, 0x2fda, 0x2fe2, 0x2fe9, 0x2ff1, 0x2ff8, 0x3000, 0x3007, 0x300f, 0x3016, 0x301e, 0x3025, 0x302d, 0x3034, 0x303c, 0x3043, 0x304b, 0x3052, 0x305a, 0x3061, 0x3069, 0x3070, 0x3078, 0x307f, 0x3087, 0x308e, 0x3096, 0x309e, 0x30a5, 0x30ad, 0x30b4, 0x30bc, 0x30c3, 0x30cb, 0x30d2, 0x30da, 0x30e1, 0x30e9, 0x30f1, 0x30f8, 0x3100, 0x3107, 0x310f, 0x3116, 0x311e, 0x3126, 0x312d, 0x3135, 0x313c, 0x3144, 0x314b, 0x3153, 0x315b, 0x3162, 0x316a, 0x3171, 0x3179, 0x3180, 0x3188, 0x3190, 0x3197, 0x319f, 0x31a6, 0x31ae, 0x31b6, 0x31bd, 0x31c5, 0x31cc, 0x31d4, 0x31dc, 0x31e3, 0x31eb, 0x31f3, 0x31fa, 0x3202, 0x3209, 0x3211, 0x3219, 0x3220, 0x3228, 0x322f, 0x3237, 0x323f, 0x3246, 0x324e, 0x3256, 0x325d, 0x3265, 0x326d, 0x3274, 0x327c, 0x3283, 0x328b, 0x3293, 0x329a, 0x32a2, 0x32aa, 0x32b1, 0x32b9, 0x32c1, 0x32c8, 0x32d0, 0x32d8, 0x32df, 0x32e7, 0x32ef, 0x32f6, 0x32fe, 0x3306, 0x330d, 0x3315, 0x331d, 0x3324, 0x332c, 0x3334, 0x333b, 0x3343, 0x334b, 0x3352, 0x335a, 0x3362, 0x336a, 0x3371, 0x3379, 0x3381, 0x3388, 0x3390, 0x3398, 0x339f, 0x33a7, 0x33af, 0x33b6, 0x33be, 0x33c6, 0x33ce, 0x33d5, 0x33dd, 0x33e5, 0x33ec, 0x33f4, 0x33fc, 0x3404, 0x340b, 0x3413, 0x341b, 0x3423, 0x342a, 0x3432, 0x343a, 0x3441, 0x3449, 0x3451, 0x3459, 0x3460, 0x3468, 0x3470, 0x3478, 0x347f, 0x3487, 0x348f, 0x3497, 0x349e, 0x34a6, 0x34ae, 0x34b6, 0x34bd, 0x34c5, 0x34cd, 0x34d5, 0x34dc, 0x34e4, 0x34ec, 0x34f4, 0x34fb, 0x3503, 0x350b, 0x3513, 0x351a, 0x3522, 0x352a, 0x3532, 0x3539, 0x3541, 0x3549, 0x3551, 0x3559, 0x3560, 0x3568, 0x3570, 0x3578, 0x3580, 0x3587, 0x358f, 0x3597, 0x359f, 0x35a6, 0x35ae, 0x35b6, 0x35be, 0x35c6, 0x35cd, 0x35d5, 0x35dd, 0x35e5, 0x35ed, 0x35f4, 0x35fc, 0x3604, 0x360c, 0x3614, 0x361b, 0x3623, 0x362b, 0x3633, 0x363b, 0x3643, 0x364a, 0x3652, 0x365a, 0x3662, 0x366a, 0x3671, 0x3679, 0x3681, 0x3689, 0x3691, 0x3699, 0x36a0, 0x36a8, 0x36b0, 0x36b8, 0x36c0, 0x36c8, 0x36cf, 0x36d7, 0x36df, 0x36e7, 0x36ef, 0x36f7, 0x36fe, 0x3706, 0x370e, 0x3716, 0x371e, 0x3726, 0x372d, 0x3735, 0x373d, 0x3745, 0x374d, 0x3755, 0x375d, 0x3764, 0x376c, 0x3774, 0x377c, 0x3784, 0x378c, 0x3794, 0x379b, 0x37a3, 0x37ab, 0x37b3, 0x37bb, 0x37c3, 0x37cb, 0x37d2, 0x37da, 0x37e2, 0x37ea, 0x37f2, 0x37fa, 0x3802, 0x380a, 0x3811, 0x3819, 0x3821, 0x3829, 0x3831, 0x3839, 0x3841, 0x3849, 0x3851, 0x3858, 0x3860, 0x3868, 0x3870, 0x3878, 0x3880, 0x3888, 0x3890, 0x3898, 0x389f, 0x38a7, 0x38af, 0x38b7, 0x38bf, 0x38c7, 0x38cf, 0x38d7, 0x38df, 0x38e6, 0x38ee, 0x38f6, 0x38fe, 0x3906, 0x390e, 0x3916, 0x391e, 0x3926, 0x392e, 0x3936, 0x393d, 0x3945, 0x394d, 0x3955, 0x395d, 0x3965, 0x396d, 0x3975, 0x397d, 0x3985, 0x398d, 0x3995, 0x399c, 0x39a4, 0x39ac, 0x39b4, 0x39bc, 0x39c4, 0x39cc, 0x39d4, 0x39dc, 0x39e4, 0x39ec, 0x39f4, 0x39fc, 0x3a03, 0x3a0b, 0x3a13, 0x3a1b, 0x3a23, 0x3a2b, 0x3a33, 0x3a3b, 0x3a43, 0x3a4b, 0x3a53, 0x3a5b, 0x3a63, 0x3a6b, 0x3a73, 0x3a7b, 0x3a82, 0x3a8a, 0x3a92, 0x3a9a, 0x3aa2, 0x3aaa, 0x3ab2, 0x3aba, 0x3ac2, 0x3aca, 0x3ad2, 0x3ada, 0x3ae2, 0x3aea, 0x3af2, 0x3afa, 0x3b02, 0x3b0a, 0x3b12, 0x3b19, 0x3b21, 0x3b29, 0x3b31, 0x3b39, 0x3b41, 0x3b49, 0x3b51, 0x3b59, 0x3b61, 0x3b69, 0x3b71, 0x3b79, 0x3b81, 0x3b89, 0x3b91, 0x3b99, 0x3ba1, 0x3ba9, 0x3bb1, 0x3bb9, 0x3bc1, 0x3bc9, 0x3bd1, 0x3bd8, 0x3be0, 0x3be8, 0x3bf0, 0x3bf8, 0x3c00, 0x3c08, 0x3c10, 0x3c18, 0x3c20, 0x3c28, 0x3c30, 0x3c38, 0x3c40, 0x3c48, 0x3c50, 0x3c58, 0x3c60, 0x3c68, 0x3c70, 0x3c78, 0x3c80, 0x3c88, 0x3c90, 0x3c98, 0x3ca0, 0x3ca8, 0x3cb0, 0x3cb8, 0x3cc0, 0x3cc8, 0x3cd0, 0x3cd8, 0x3ce0, 0x3ce8, 0x3cf0, 0x3cf8, 0x3d00, 0x3d08, 0x3d10, 0x3d18, 0x3d1f, 0x3d27, 0x3d2f, 0x3d37, 0x3d3f, 0x3d47, 0x3d4f, 0x3d57, 0x3d5f, 0x3d67, 0x3d6f, 0x3d77, 0x3d7f, 0x3d87, 0x3d8f, 0x3d97, 0x3d9f, 0x3da7, 0x3daf, 0x3db7, 0x3dbf, 0x3dc7, 0x3dcf, 0x3dd7, 0x3ddf, 0x3de7, 0x3def, 0x3df7, 0x3dff, 0x3e07, 0x3e0f, 0x3e17, 0x3e1f, 0x3e27, 0x3e2f, 0x3e37, 0x3e3f, 0x3e47, 0x3e4f, 0x3e57, 0x3e5f, 0x3e67, 0x3e6f, 0x3e77, 0x3e7f, 0x3e87, 0x3e8f, 0x3e97, 0x3e9f, 0x3ea7, 0x3eaf, 0x3eb7, 0x3ebf, 0x3ec7, 0x3ecf, 0x3ed7, 0x3edf, 0x3ee7, 0x3eef, 0x3ef7, 0x3eff, 0x3f07, 0x3f0f, 0x3f17, 0x3f1f, 0x3f27, 0x3f2f, 0x3f37, 0x3f3f, 0x3f47, 0x3f4f, 0x3f57, 0x3f5f, 0x3f67, 0x3f6f, 0x3f77, 0x3f7f, 0x3f87, 0x3f8f, 0x3f97, 0x3f9f, 0x3fa7, 0x3faf, 0x3fb7, 0x3fbf, 0x3fc7, 0x3fcf, 0x3fd7, 0x3fdf, 0x3fe7, 0x3fef, 0x3ff7 };
	int len = RD0.m_data;
	for (int i = 0; i < len; i++)
	{
		RD0 = M[RA0++];
		unsigned int x = RD0.m_data;
		x = x >> 5;
		RD1 = tab[x];
		M[RA1++] = RD1;
	}



	////标准公式
	//int len = RD0.m_data;
	//double x;
	//for (int i = 0; i < len; i++)
	//{
	//	RD0 = M[RA0++];
	//	x = *(short*)(&RD0.m_data);
	//	x = x / 32767;
	//	x = exp(-x);
	//	x = 1 / (1 + x);
	//	x = x * 32767;
	//	RD0 = x;
	//	M[RA1++] = RD0;
	//}

	Return_AutoField(3 * MMU_BASE);
}

////////////////////////////////////////////////////////
//  名称:
//      Tanh
//  功能:
//      Tanh函数，q15
//  参数:
//      1.M[RSP+2*MMU_BASE]：输入地址
//      2.M[RSP+1*MMU_BASE]：输出地址
//      3.M[RSP+0*MMU_BASE]：数据长度
//  返回值:
//      无
////////////////////////////////////////////////////////
Sub_AutoField Tanh
{
	RA0 = M[RSP + 2 * MMU_BASE];
	RA1 = M[RSP + 1 * MMU_BASE];
	RD0 = M[RSP + 0 * MMU_BASE];

	//查表法
	int tab[2048] = { 0x0000,0x001f,0x003f,0x005f,0x007f,0x009f,0x00bf,0x00df,0x00ff,0x011f,0x013f,0x015f,0x017f,0x019f,0x01bf,0x01df,0x01ff,0x021f,0x023f,0x025f,0x027f,0x029f,0x02bf,0x02df,0x02ff,0x031f,0x033f,0x035f,0x037f,0x039f,0x03bf,0x03df,0x03ff,0x041f,0x043f,0x045f,0x047f,0x049f,0x04bf,0x04df,0x04ff,0x051f,0x053f,0x055f,0x057f,0x059f,0x05bf,0x05de,0x05fe,0x061e,0x063e,0x065e,0x067e,0x069e,0x06be,0x06de,0x06fe,0x071e,0x073e,0x075d,0x077d,0x079d,0x07bd,0x07dd,0x07fd,0x081d,0x083d,0x085c,0x087c,0x089c,0x08bc,0x08dc,0x08fc,0x091c,0x093b,0x095b,0x097b,0x099b,0x09bb,0x09da,0x09fa,0x0a1a,0x0a3a,0x0a5a,0x0a79,0x0a99,0x0ab9,0x0ad9,0x0af9,0x0b18,0x0b38,0x0b58,0x0b78,0x0b97,0x0bb7,0x0bd7,0x0bf7,0x0c16,0x0c36,0x0c56,0x0c75,0x0c95,0x0cb5,0x0cd4,0x0cf4,0x0d14,0x0d33,0x0d53,0x0d73,0x0d92,0x0db2,0x0dd2,0x0df1,0x0e11,0x0e31,0x0e50,0x0e70,0x0e8f,0x0eaf,0x0ece,0x0eee,0x0f0e,0x0f2d,0x0f4d,0x0f6c,0x0f8c,0x0fab,0x0fcb,0x0fea,0x100a,0x1029,0x1049,0x1068,0x1088,0x10a7,0x10c7,0x10e6,0x1106,0x1125,0x1144,0x1164,0x1183,0x11a3,0x11c2,0x11e1,0x1201,0x1220,0x123f,0x125f,0x127e,0x129d,0x12bd,0x12dc,0x12fb,0x131b,0x133a,0x1359,0x1378,0x1398,0x13b7,0x13d6,0x13f5,0x1415,0x1434,0x1453,0x1472,0x1491,0x14b1,0x14d0,0x14ef,0x150e,0x152d,0x154c,0x156b,0x158b,0x15aa,0x15c9,0x15e8,0x1607,0x1626,0x1645,0x1664,0x1683,0x16a2,0x16c1,0x16e0,0x16ff,0x171e,0x173d,0x175c,0x177b,0x179a,0x17b8,0x17d7,0x17f6,0x1815,0x1834,0x1853,0x1872,0x1891,0x18af,0x18ce,0x18ed,0x190c,0x192a,0x1949,0x1968,0x1987,0x19a5,0x19c4,0x19e3,0x1a02,0x1a20,0x1a3f,0x1a5e,0x1a7c,0x1a9b,0x1ab9,0x1ad8,0x1af7,0x1b15,0x1b34,0x1b52,0x1b71,0x1b8f,0x1bae,0x1bcc,0x1beb,0x1c09,0x1c28,0x1c46,0x1c65,0x1c83,0x1ca1,0x1cc0,0x1cde,0x1cfd,0x1d1b,0x1d39,0x1d58,0x1d76,0x1d94,0x1db2,0x1dd1,0x1def,0x1e0d,0x1e2b,0x1e4a,0x1e68,0x1e86,0x1ea4,0x1ec2,0x1ee1,0x1eff,0x1f1d,0x1f3b,0x1f59,0x1f77,0x1f95,0x1fb3,0x1fd1,0x1fef,0x200d,0x202b,0x2049,0x2067,0x2085,0x20a3,0x20c1,0x20df,0x20fd,0x211b,0x2138,0x2156,0x2174,0x2192,0x21b0,0x21cd,0x21eb,0x2209,0x2227,0x2244,0x2262,0x2280,0x229d,0x22bb,0x22d9,0x22f6,0x2314,0x2332,0x234f,0x236d,0x238a,0x23a8,0x23c5,0x23e3,0x2400,0x241e,0x243b,0x2459,0x2476,0x2493,0x24b1,0x24ce,0x24eb,0x2509,0x2526,0x2543,0x2561,0x257e,0x259b,0x25b8,0x25d6,0x25f3,0x2610,0x262d,0x264a,0x2667,0x2685,0x26a2,0x26bf,0x26dc,0x26f9,0x2716,0x2733,0x2750,0x276d,0x278a,0x27a7,0x27c4,0x27e0,0x27fd,0x281a,0x2837,0x2854,0x2871,0x288e,0x28aa,0x28c7,0x28e4,0x2901,0x291d,0x293a,0x2957,0x2973,0x2990,0x29ad,0x29c9,0x29e6,0x2a02,0x2a1f,0x2a3b,0x2a58,0x2a74,0x2a91,0x2aad,0x2aca,0x2ae6,0x2b02,0x2b1f,0x2b3b,0x2b58,0x2b74,0x2b90,0x2bac,0x2bc9,0x2be5,0x2c01,0x2c1d,0x2c3a,0x2c56,0x2c72,0x2c8e,0x2caa,0x2cc6,0x2ce2,0x2cfe,0x2d1a,0x2d36,0x2d52,0x2d6e,0x2d8a,0x2da6,0x2dc2,0x2dde,0x2dfa,0x2e16,0x2e32,0x2e4e,0x2e69,0x2e85,0x2ea1,0x2ebd,0x2ed8,0x2ef4,0x2f10,0x2f2b,0x2f47,0x2f63,0x2f7e,0x2f9a,0x2fb5,0x2fd1,0x2fec,0x3008,0x3023,0x303f,0x305a,0x3076,0x3091,0x30ad,0x30c8,0x30e3,0x30ff,0x311a,0x3135,0x3150,0x316c,0x3187,0x31a2,0x31bd,0x31d8,0x31f4,0x320f,0x322a,0x3245,0x3260,0x327b,0x3296,0x32b1,0x32cc,0x32e7,0x3302,0x331d,0x3338,0x3352,0x336d,0x3388,0x33a3,0x33be,0x33d8,0x33f3,0x340e,0x3429,0x3443,0x345e,0x3479,0x3493,0x34ae,0x34c8,0x34e3,0x34fd,0x3518,0x3532,0x354d,0x3567,0x3582,0x359c,0x35b6,0x35d1,0x35eb,0x3605,0x3620,0x363a,0x3654,0x366f,0x3689,0x36a3,0x36bd,0x36d7,0x36f1,0x370b,0x3725,0x3740,0x375a,0x3774,0x378e,0x37a7,0x37c1,0x37db,0x37f5,0x380f,0x3829,0x3843,0x385d,0x3876,0x3890,0x38aa,0x38c4,0x38dd,0x38f7,0x3911,0x392a,0x3944,0x395d,0x3977,0x3991,0x39aa,0x39c4,0x39dd,0x39f6,0x3a10,0x3a29,0x3a43,0x3a5c,0x3a75,0x3a8f,0x3aa8,0x3ac1,0x3ada,0x3af4,0x3b0d,0x3b26,0x3b3f,0x3b58,0x3b71,0x3b8b,0x3ba4,0x3bbd,0x3bd6,0x3bef,0x3c08,0x3c21,0x3c3a,0x3c52,0x3c6b,0x3c84,0x3c9d,0x3cb6,0x3ccf,0x3ce7,0x3d00,0x3d19,0x3d32,0x3d4a,0x3d63,0x3d7b,0x3d94,0x3dad,0x3dc5,0x3dde,0x3df6,0x3e0f,0x3e27,0x3e40,0x3e58,0x3e70,0x3e89,0x3ea1,0x3eba,0x3ed2,0x3eea,0x3f02,0x3f1b,0x3f33,0x3f4b,0x3f63,0x3f7b,0x3f93,0x3fac,0x3fc4,0x3fdc,0x3ff4,0x400c,0x4024,0x403c,0x4054,0x406b,0x4083,0x409b,0x40b3,0x40cb,0x40e3,0x40fa,0x4112,0x412a,0x4142,0x4159,0x4171,0x4188,0x41a0,0x41b8,0x41cf,0x41e7,0x41fe,0x4216,0x422d,0x4245,0x425c,0x4273,0x428b,0x42a2,0x42b9,0x42d1,0x42e8,0x42ff,0x4316,0x432e,0x4345,0x435c,0x4373,0x438a,0x43a1,0x43b8,0x43cf,0x43e6,0x43fd,0x4414,0x442b,0x4442,0x4459,0x4470,0x4487,0x449e,0x44b4,0x44cb,0x44e2,0x44f9,0x450f,0x4526,0x453d,0x4553,0x456a,0x4580,0x4597,0x45ad,0x45c4,0x45da,0x45f1,0x4607,0x461e,0x4634,0x464a,0x4661,0x4677,0x468d,0x46a4,0x46ba,0x46d0,0x46e6,0x46fd,0x4713,0x4729,0x473f,0x4755,0x476b,0x4781,0x4797,0x47ad,0x47c3,0x47d9,0x47ef,0x4805,0x481b,0x4830,0x4846,0x485c,0x4872,0x4887,0x489d,0x48b3,0x48c9,0x48de,0x48f4,0x4909,0x491f,0x4934,0x494a,0x495f,0x4975,0x498a,0x49a0,0x49b5,0x49cb,0x49e0,0x49f5,0x4a0b,0x4a20,0x4a35,0x4a4a,0x4a60,0x4a75,0x4a8a,0x4a9f,0x4ab4,0x4ac9,0x4ade,0x4af3,0x4b08,0x4b1d,0x4b32,0x4b47,0x4b5c,0x4b71,0x4b86,0x4b9b,0x4bb0,0x4bc4,0x4bd9,0x4bee,0x4c03,0x4c17,0x4c2c,0x4c41,0x4c55,0x4c6a,0x4c7f,0x4c93,0x4ca8,0x4cbc,0x4cd1,0x4ce5,0x4cf9,0x4d0e,0x4d22,0x4d37,0x4d4b,0x4d5f,0x4d74,0x4d88,0x4d9c,0x4db0,0x4dc5,0x4dd9,0x4ded,0x4e01,0x4e15,0x4e29,0x4e3d,0x4e51,0x4e65,0x4e79,0x4e8d,0x4ea1,0x4eb5,0x4ec9,0x4edd,0x4ef1,0x4f04,0x4f18,0x4f2c,0x4f40,0x4f54,0x4f67,0x4f7b,0x4f8f,0x4fa2,0x4fb6,0x4fc9,0x4fdd,0x4ff0,0x5004,0x5017,0x502b,0x503e,0x5052,0x5065,0x5078,0x508c,0x509f,0x50b2,0x50c6,0x50d9,0x50ec,0x50ff,0x5112,0x5126,0x5139,0x514c,0x515f,0x5172,0x5185,0x5198,0x51ab,0x51be,0x51d1,0x51e4,0x51f7,0x520a,0x521c,0x522f,0x5242,0x5255,0x5268,0x527a,0x528d,0x52a0,0x52b2,0x52c5,0x52d8,0x52ea,0x52fd,0x530f,0x5322,0x5334,0x5347,0x5359,0x536c,0x537e,0x5390,0x53a3,0x53b5,0x53c7,0x53da,0x53ec,0x53fe,0x5410,0x5422,0x5435,0x5447,0x5459,0x546b,0x547d,0x548f,0x54a1,0x54b3,0x54c5,0x54d7,0x54e9,0x54fb,0x550d,0x551f,0x5530,0x5542,0x5554,0x5566,0x5578,0x5589,0x559b,0x55ad,0x55be,0x55d0,0x55e2,0x55f3,0x5605,0x5616,0x5628,0x5639,0x564b,0x565c,0x566e,0x567f,0x5690,0x56a2,0x56b3,0x56c4,0x56d6,0x56e7,0x56f8,0x5709,0x571a,0x572c,0x573d,0x574e,0x575f,0x5770,0x5781,0x5792,0x57a3,0x57b4,0x57c5,0x57d6,0x57e7,0x57f8,0x5809,0x581a,0x582a,0x583b,0x584c,0x585d,0x586e,0x587e,0x588f,0x58a0,0x58b0,0x58c1,0x58d1,0x58e2,0x58f3,0x5903,0x5914,0x5924,0x5935,0x5945,0x5955,0x5966,0x5976,0x5987,0x5997,0x59a7,0x59b8,0x59c8,0x59d8,0x59e8,0x59f8,0x5a09,0x5a19,0x5a29,0x5a39,0x5a49,0x5a59,0x5a69,0x5a79,0x5a89,0x5a99,0x5aa9,0x5ab9,0x5ac9,0x5ad9,0x5ae9,0x5af9,0x5b08,0x5b18,0x5b28,0x5b38,0x5b48,0x5b57,0x5b67,0x5b77,0x5b86,0x5b96,0x5ba6,0x5bb5,0x5bc5,0x5bd4,0x5be4,0x5bf3,0x5c03,0x5c12,0x5c22,0x5c31,0x5c40,0x5c50,0x5c5f,0x5c6e,0x5c7e,0x5c8d,0x5c9c,0x5cab,0x5cbb,0x5cca,0x5cd9,0x5ce8,0x5cf7,0x5d06,0x5d16,0x5d25,0x5d34,0x5d43,0x5d52,0x5d61,0x5d70,0x5d7f,0x5d8d,0x5d9c,0x5dab,0x5dba,0x5dc9,0x5dd8,0x5de6,0x5df5,0x5e04,0x5e13,0x5e21,0x5e30,0x5e3f,0x5e4d,0x5e5c,0x5e6b,0x5e79,0x5e88,0x5e96,0x5ea5,0x5eb3,0x5ec2,0x5ed0,0x5edf,0x5eed,0x5efb,0x5f0a,0x5f18,0x5f26,0x5f35,0x5f43,0x5f51,0x5f60,0x5f6e,0x5f7c,0x5f8a,0x5f98,0x5fa6,0x5fb5,0x5fc3,0x5fd1,0x5fdf,0x5fed,0x5ffb,0x6009,0x6017,0x6025,0x6033,0x6041,0x604f,0x605c,0x606a,0x6078,0x6086,0x6094,0x60a1,0x60af,0x60bd,0x60cb,0x60d8,0x60e6,0x60f4,0x6101,0x610f,0x611d,0x612a,0x6138,0x6145,0x6153,0x6160,0x616e,0x617b,0x6189,0x6196,0x61a3,0x61b1,0x61be,0x61cb,0x61d9,0x61e6,0x61f3,0x6200,0x620e,0x621b,0x6228,0x6235,0x6242,0x6250,0x625d,0x626a,0x6277,0x6284,0x6291,0x629e,0x62ab,0x62b8,0x62c5,0x62d2,0x62df,0x62ec,0x62f8,0x6305,0x6312,0x631f,0x632c,0x6339,0x6345,0x6352,0x635f,0x636b,0x6378,0x6385,0x6391,0x639e,0x63ab,0x63b7,0x63c4,0x63d0,0x63dd,0x63e9,0x63f6,0x6402,0x640f,0x641b,0x6428,0x6434,0x6440,0x644d,0x6459,0x6466,0x6472,0x647e,0x648a,0x6497,0x64a3,0x64af,0x64bb,0x64c7,0x64d4,0x64e0,0x64ec,0x64f8,0x6504,0x6510,0x651c,0x6528,0x6534,0x6540,0x654c,0x6558,0x6564,0x6570,0x657c,0x6588,0x6593,0x659f,0x65ab,0x65b7,0x65c3,0x65ce,0x65da,0x65e6,0x65f2,0x65fd,0x6609,0x6615,0x6620,0x662c,0x6638,0x6643,0x664f,0x665a,0x6666,0x6671,0x667d,0x6688,0x6694,0x669f,0x66ab,0x66b6,0x66c1,0x66cd,0x66d8,0x66e3,0x66ef,0x66fa,0x6705,0x6711,0x671c,0x6727,0x6732,0x673d,0x6749,0x6754,0x675f,0x676a,0x6775,0x6780,0x678b,0x6796,0x67a1,0x67ac,0x67b7,0x67c2,0x67cd,0x67d8,0x67e3,0x67ee,0x67f9,0x6804,0x680f,0x6819,0x6824,0x682f,0x683a,0x6845,0x684f,0x685a,0x6865,0x6870,0x687a,0x6885,0x6890,0x689a,0x68a5,0x68af,0x68ba,0x68c5,0x68cf,0x68da,0x68e4,0x68ef,0x68f9,0x6904,0x690e,0x6919,0x6923,0x692d,0x6938,0x6942,0x694c,0x6957,0x6961,0x696b,0x6976,0x6980,0x698a,0x6994,0x699f,0x69a9,0x69b3,0x69bd,0x69c7,0x69d2,0x69dc,0x69e6,0x69f0,0x69fa,0x6a04,0x6a0e,0x6a18,0x6a22,0x6a2c,0x6a36,0x6a40,0x6a4a,0x6a54,0x6a5e,0x6a68,0x6a71,0x6a7b,0x6a85,0x6a8f,0x6a99,0x6aa3,0x6aac,0x6ab6,0x6ac0,0x6aca,0x6ad3,0x6add,0x6ae7,0x6af0,0x6afa,0x6b04,0x6b0d,0x6b17,0x6b21,0x6b2a,0x6b34,0x6b3d,0x6b47,0x6b50,0x6b5a,0x6b63,0x6b6d,0x6b76,0x6b80,0x6b89,0x6b92,0x6b9c,0x6ba5,0x6baf,0x6bb8,0x6bc1,0x6bcb,0x6bd4,0x6bdd,0x6be6,0x6bf0,0x6bf9,0x6c02,0x6c0b,0x6c14,0x6c1e,0x6c27,0x6c30,0x6c39,0x6c42,0x6c4b,0x6c54,0x6c5d,0x6c67,0x6c70,0x6c79,0x6c82,0x6c8b,0x6c94,0x6c9d,0x6ca5,0x6cae,0x6cb7,0x6cc0,0x6cc9,0x6cd2,0x6cdb,0x6ce4,0x6ced,0x6cf5,0x6cfe,0x6d07,0x6d10,0x6d18,0x6d21,0x6d2a,0x6d33,0x6d3b,0x6d44,0x6d4d,0x6d55,0x6d5e,0x6d67,0x6d6f,0x6d78,0x6d80,0x6d89,0x6d92,0x6d9a,0x6da3,0x6dab,0x6db4,0x6dbc,0x6dc5,0x6dcd,0x6dd6,0x6dde,0x6de6,0x6def,0x6df7,0x6e00,0x6e08,0x6e10,0x6e19,0x6e21,0x6e29,0x6e31,0x6e3a,0x6e42,0x6e4a,0x6e53,0x6e5b,0x6e63,0x6e6b,0x6e73,0x6e7b,0x6e84,0x6e8c,0x6e94,0x6e9c,0x6ea4,0x6eac,0x6eb4,0x6ebc,0x6ec4,0x6ecc,0x6ed4,0x6edc,0x6ee4,0x6eec,0x6ef4,0x6efc,0x6f04,0x6f0c,0x6f14,0x6f1c,0x6f24,0x6f2c,0x6f33,0x6f3b,0x6f43,0x6f4b,0x6f53,0x6f5b,0x6f62,0x6f6a,0x6f72,0x6f7a,0x6f81,0x6f89,0x6f91,0x6f98,0x6fa0,0x6fa8,0x6faf,0x6fb7,0x6fbf,0x6fc6,0x6fce,0x6fd5,0x6fdd,0x6fe4,0x6fec,0x6ff4,0x6ffb,0x7003,0x700a,0x7011,0x7019,0x7020,0x7028,0x702f,0x7037,0x703e,0x7045,0x704d,0x7054,0x705c,0x7063,0x706a,0x7071,0x7079,0x7080,0x7087,0x708f,0x7096,0x709d,0x70a4,0x70ac,0x70b3,0x70ba,0x70c1,0x70c8,0x70cf,0x70d7,0x70de,0x70e5,0x70ec,0x70f3,0x70fa,0x7101,0x7108,0x710f,0x7116,0x711d,0x7124,0x712b,0x7132,0x7139,0x7140,0x7147,0x714e,0x7155,0x715c,0x7163,0x716a,0x7170,0x7177,0x717e,0x7185,0x718c,0x7193,0x7199,0x71a0,0x71a7,0x71ae,0x71b4,0x71bb,0x71c2,0x71c9,0x71cf,0x71d6,0x71dd,0x71e3,0x71ea,0x71f1,0x71f7,0x71fe,0x7205,0x720b,0x7212,0x7218,0x721f,0x7225,0x722c,0x7233,0x7239,0x7240,0x7246,0x724d,0x7253,0x725a,0x7260,0x7266,0x726d,0x7273,0x727a,0x7280,0x7286,0x728d,0x7293,0x729a,0x72a0,0x72a6,0x72ad,0x72b3,0x72b9,0x72bf,0x72c6,0x72cc,0x72d2,0x72d8,0x72df,0x72e5,0x72eb,0x72f1,0x72f8,0x72fe,0x7304,0x730a,0x7310,0x7316,0x731c,0x7323,0x7329,0x732f,0x7335,0x733b,0x7341,0x7347,0x734d,0x7353,0x7359,0x735f,0x7365,0x736b,0x7371,0x7377,0x737d,0x7383,0x7389,0x738f,0x7395,0x739b,0x73a0,0x73a6,0x73ac,0x73b2,0x73b8,0x73be,0x73c4,0x73c9,0x73cf,0x73d5,0x73db,0x73e1,0x73e6,0x73ec,0x73f2,0x73f8,0x73fd,0x7403,0x7409,0x740e,0x7414,0x741a,0x741f,0x7425,0x742b,0x7430,0x7436,0x743c,0x7441,0x7447,0x744c,0x7452,0x7458,0x745d,0x7463,0x7468,0x746e,0x7473,0x7479,0x747e,0x7484,0x7489,0x748f,0x7494,0x749a,0x749f,0x74a4,0x74aa,0x74af,0x74b5,0x74ba,0x74bf,0x74c5,0x74ca,0x74d0,0x74d5,0x74da,0x74e0,0x74e5,0x74ea,0x74ef,0x74f5,0x74fa,0x74ff,0x7505,0x750a,0x750f,0x7514,0x7519,0x751f,0x7524,0x7529,0x752e,0x7533,0x7539,0x753e,0x7543,0x7548,0x754d,0x7552,0x7557,0x755c,0x7562,0x7567,0x756c,0x7571,0x7576,0x757b,0x7580,0x7585,0x758a,0x758f,0x7594,0x7599,0x759e,0x75a3,0x75a8,0x75ad,0x75b2,0x75b7,0x75bc,0x75c1,0x75c5,0x75ca,0x75cf,0x75d4,0x75d9,0x75de,0x75e3,0x75e8,0x75ec,0x75f1,0x75f6,0x75fb,0x7600,0x7605,0x7609,0x760e,0x7613,0x7618,0x761c,0x7621,0x7626,0x762b,0x762f,0x7634,0x7639,0x763d,0x7642,0x7647,0x764b,0x7650,0x7655,0x7659,0x765e,0x7663,0x7667,0x766c,0x7671,0x7675,0x767a,0x767e,0x7683,0x7687,0x768c,0x7691,0x7695,0x769a,0x769e,0x76a3,0x76a7,0x76ac,0x76b0,0x76b5,0x76b9,0x76be,0x76c2,0x76c6,0x76cb,0x76cf,0x76d4,0x76d8,0x76dd,0x76e1,0x76e5,0x76ea,0x76ee,0x76f2,0x76f7,0x76fb,0x7700,0x7704,0x7708,0x770d,0x7711,0x7715,0x7719,0x771e,0x7722,0x7726,0x772b,0x772f,0x7733,0x7737,0x773c,0x7740,0x7744,0x7748,0x774c,0x7751,0x7755,0x7759,0x775d,0x7761,0x7765,0x776a,0x776e,0x7772,0x7776,0x777a,0x777e,0x7782,0x7786,0x778b,0x778f,0x7793,0x7797,0x779b,0x779f,0x77a3,0x77a7,0x77ab,0x77af,0x77b3,0x77b7,0x77bb,0x77bf,0x77c3,0x77c7,0x77cb,0x77cf,0x77d3,0x77d7,0x77db,0x77df,0x77e3,0x77e7,0x77eb,0x77ee,0x77f2,0x77f6,0x77fa,0x77fe,0x7802,0x7806,0x780a,0x780d,0x7811,0x7815,0x7819,0x781d,0x7821,0x7824,0x7828,0x782c,0x7830,0x7834,0x7837,0x783b,0x783f,0x7843,0x7846,0x784a,0x784e,0x7852,0x7855,0x7859,0x785d,0x7860,0x7864,0x7868,0x786b,0x786f,0x7873,0x7876,0x787a,0x787e,0x7881,0x7885,0x7889,0x788c,0x7890,0x7893,0x7897,0x789b,0x789e,0x78a2,0x78a5,0x78a9,0x78ad,0x78b0,0x78b4,0x78b7,0x78bb,0x78be,0x78c2,0x78c5,0x78c9,0x78cc,0x78d0,0x78d3,0x78d7,0x78da,0x78de,0x78e1,0x78e5,0x78e8,0x78eb,0x78ef,0x78f2,0x78f6,0x78f9,0x78fd,0x7900,0x7903,0x7907,0x790a,0x790e,0x7911,0x7914,0x7918,0x791b,0x791e,0x7922,0x7925,0x7928,0x792c,0x792f,0x7932,0x7936,0x7939,0x793c,0x7940,0x7943,0x7946,0x7949,0x794d,0x7950,0x7953,0x7956,0x795a,0x795d,0x7960,0x7963,0x7966,0x796a,0x796d,0x7970,0x7973,0x7976,0x797a,0x797d,0x7980,0x7983,0x7986,0x7989,0x798d,0x7990,0x7993,0x7996,0x7999,0x799c,0x799f,0x79a2,0x79a6,0x79a9,0x79ac,0x79af,0x79b2,0x79b5,0x79b8,0x79bb,0x79be,0x79c1,0x79c4,0x79c7,0x79ca,0x79cd,0x79d0,0x79d3,0x79d6,0x79d9,0x79dc,0x79df,0x79e2,0x79e5,0x79e8,0x79eb,0x79ee,0x79f1,0x79f4,0x79f7,0x79fa,0x79fd,0x7a00,0x7a03,0x7a06,0x7a09,0x7a0c,0x7a0e,0x7a11,0x7a14,0x7a17,0x7a1a,0x7a1d,0x7a20,0x7a23,0x7a25,0x7a28,0x7a2b,0x7a2e,0x7a31,0x7a34,0x7a37,0x7a39,0x7a3c,0x7a3f,0x7a42,0x7a45,0x7a47,0x7a4a,0x7a4d,0x7a50,0x7a53,0x7a55,0x7a58,0x7a5b,0x7a5e,0x7a60,0x7a63,0x7a66,0x7a69,0x7a6b,0x7a6e,0x7a71,0x7a73,0x7a76,0x7a79,0x7a7c,0x7a7e,0x7a81,0x7a84,0x7a86,0x7a89,0x7a8c,0x7a8e,0x7a91,0x7a94,0x7a96,0x7a99,0x7a9c,0x7a9e,0x7aa1,0x7aa3,0x7aa6,0x7aa9,0x7aab,0x7aae,0x7ab0,0x7ab3,0x7ab6,0x7ab8,0x7abb,0x7abd,0x7ac0,0x7ac3,0x7ac5,0x7ac8,0x7aca,0x7acd,0x7acf,0x7ad2,0x7ad4,0x7ad7,0x7ad9,0x7adc,0x7ade,0x7ae1,0x7ae3,0x7ae6,0x7ae8,0x7aeb,0x7aed,0x7af0,0x7af2,0x7af5,0x7af7,0x7afa,0x7afc,0x7aff,0x7b01,0x7b04,0x7b06,0x7b08,0x7b0b,0x7b0d,0x7b10,0x7b12,0x7b15,0x7b17,0x7b19,0x7b1c,0x7b1e,0x7b21,0x7b23,0x7b25,0x7b28,0x7b2a,0x7b2c,0x7b2f,0x7b31,0x7b34,0x7b36,0x7b38,0x7b3b,0x7b3d,0x7b3f,0x7b42,0x7b44,0x7b46,0x7b48,0x7b4b,0x7b4d,0x7b4f,0x7b52,0x7b54,0x7b56,0x7b59,0x7b5b,0x7b5d,0x7b5f,0x7b62};
	int len = RD0.m_data;
	for (int i = 0; i < len; i++)
	{
		RD0 = M[RA0++];
		unsigned int x = RD0.m_data;
		x = x >> 5;
		RD1 = tab[x];
		M[RA1++] = RD1;
	}



	////标准公式
	/*int len = RD0.m_data;
	double x,y;
	for (int i = 0; i < len; i++)
	{
		RD0 = M[RA0++];
		x = RD0.m_data;
		x = x / 32767;
		y = exp(-x);
		x = exp(x);
		x = (x - y) / (x + y);
		x = x * 32767;
		RD0 = x;
		M[RA1++] = RD0;
	}*/

	Return_AutoField(3 * MMU_BASE);
}

////////////////////////////////////////////////////////
//  名称:
//      Mac_48_1024
//  功能:
//      1024长度的48位乘累加器
//  参数:
//      1.M[RSP+2*MMU_BASE]：输入序列0指针，低16bit有效格式
//      2.M[RSP+1*MMU_BASE]：输入序列1指针，低16bit有效格式
//      3.RD0：输出结果的低32位
//		4.RD1：输出结果的高16位,低16位有效
//  返回值:
//      无
////////////////////////////////////////////////////////
Sub_AutoField Mac_48_1024
{
	RA0 = M[RSP + 1 * MMU_BASE];
	RA1 = M[RSP + 0 * MMU_BASE];
	int len = 1024;
	long long sum = 0;
	int x,y;
	for (int i = 0; i < len; i++)
	{
		RD0 = M[RA0++];
		RD1 = M[RA1++];
		x = *(short*)(&RD0.m_data);					//低16bit 
		y = *(short*)(&RD1.m_data);					//低16bit 
		x = x * y;
		sum += x;
	}
	x = sum >> 32;
	y = sum;
	RD0 = y;
	RD1 = x;

	Return_AutoField(2 * MMU_BASE);

}


////////////////////////////////////////////////////////
//  名称:
//      Rolling_Multi
//  功能:
//      高128*宽64的矩阵与16*16矩阵滚动矩阵乘
//  参数:
//      1.M[RSP+2*MMU_BASE]：高128*宽64的矩阵data首地址,数据格式为Q15
//      2.M[RSP+1*MMU_BASE]：16*16矩阵存放首地址,数据格式为Q15
//      3.M[RSP+0*MMU_BASE]：计算结果地址,数据格式为Q16,已限幅
//  返回值:
//      无
////////////////////////////////////////////////////////
Sub_AutoField Rolling_Multi
{
	RA0 = M[RSP + 2 * MMU_BASE];	//128*64矩阵首地址
	RA1 = M[RSP + 1 * MMU_BASE];	//16*16矩阵首地址
	RA2 = M[RSP + 0 * MMU_BASE];	//结果地址

	short D[8192], A[256], B[256];
	int C[256] = { 0 };
	int data[16];
	for (int i = 0; i < 8192; i++)
	{
		RD0 = M[RA0++];
		D[i] = RD0.m_data;
	}
	for (int i = 0; i < 256; i++)
	{
		RD0 = M[RA1++];
		B[i] = RD0.m_data;
	}

	for (int i = 0; i < 8; i++)
	{
		for (int n = 0; n < 4; n++)
		{
			for (int j = 0; j < 16; j++)
			{
				for (int k = 0; k < 16; k++)
				{
					A[j * 16 + k] = D[1024 * i + 64 * j + k + 16 * n];
				}
			}
			conv.Multi_Array(A, B, C);
			for (int j = 0; j < 16; j++)
			{
				for (int k = 0; k < 16; k++)
				{
					D[1024 * i + 64 * j + k + 16 * n] = C[j * 16 + k];
				}
			}

		}
	}

	for (int i = 0; i < 8192; i++)
	{
		RD0 = D[i];
		M[RA2++] = RD0;
		//RD0 = T[i];
		//M[RA1++] = RD0;

	}
	Return_AutoField(3 * MMU_BASE);
}


////////////////////////////////////////////////////////
//  名称:
//      Mac_48_16k
//  功能:
//      16k长度的48位乘累加器
//  参数:
//      1.M[RSP+2*MMU_BASE]：输入序列0指针，低16bit有效格式
//      2.M[RSP+1*MMU_BASE]：输入序列1指针，低16bit有效格式
//      3.RD0：输出结果的低32位
//		4.RD1：输出结果的高16位,低16位有效
//  返回值:
//      无
////////////////////////////////////////////////////////
Sub_AutoField Mac_48_16k
{
	RA0 = M[RSP + 1 * MMU_BASE];
	RA1 = M[RSP + 0 * MMU_BASE];
	int len = 16384;
	long long sum = 0;
	int x,y;
	for (int i = 0; i < len; i++)
	{
		RD0 = M[RA0++];
		RD1 = M[RA1++];
		x = *(short*)(&RD0.m_data);					//低16bit 
		y = *(short*)(&RD1.m_data);					//低16bit 
		x = x * y;
		sum += x;
	}
	x = sum >> 32;
	y = sum;
	RD0 = y;
	RD1 = x;

	Return_AutoField(2 * MMU_BASE);

}